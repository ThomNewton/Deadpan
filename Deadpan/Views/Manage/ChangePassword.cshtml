@*
    This view provides a form for an authenticated user to change their existing local password.
    It is strongly typed to the ChangePasswordViewModel, which contains properties
    for the user's old password, new password, and confirmation password, along with
    data annotations for validation.
*@
@model Deadpan.Models.ChangePasswordViewModel
@{
    ViewBag.Title = "Change Password";
}

<h2>@ViewBag.Title.</h2>

@*
    This form POSTs the password data to the "ChangePassword" action
    in the "Manage" controller.
*@
@using (Html.BeginForm("ChangePassword", "Manage", FormMethod.Post, new { @class = "form-horizontal", role = "form" }))
{
    @* Renders a hidden input with a unique token to prevent Cross-Site Request Forgery (CSRF) attacks. *@
    @Html.AntiForgeryToken()
    <h4>Change Password Form</h4>
    <hr />
    @* Displays a summary of all validation errors at the top of the form. *@
    @Html.ValidationSummary("", new { @class = "text-danger" })
    <div class="form-group">
        @Html.LabelFor(m => m.OldPassword, new { @class = "col-md-2 control-label" })
        <div class="col-md-10">
            @* Renders a password input field for the user's current password. *@
            @Html.PasswordFor(m => m.OldPassword, new { @class = "form-control" })
        </div>
    </div>
    <div class="form-group">
        @Html.LabelFor(m => m.NewPassword, new { @class = "col-md-2 control-label" })
        <div class="col-md-10">
            @* Renders a password input field for the new password. *@
            @Html.PasswordFor(m => m.NewPassword, new { @class = "form-control" })
        </div>
    </div>
    <div class="form-group">
        @Html.LabelFor(m => m.ConfirmPassword, new { @class = "col-md-2 control-label" })
        <div class="col-md-10">
            @* Renders a password input field for confirming the new password. Validation is handled by the [Compare] attribute in the ViewModel. *@
            @Html.PasswordFor(m => m.ConfirmPassword, new { @class = "form-control" })
        </div>
    </div>
    <div class="form-group">
        <div class="col-md-offset-2 col-md-10">
            <input type="submit" value="Change password" class="btn btn-default" />
        </div>
    </div>
}
@*
    This section renders the jQuery Validation script bundle to enable client-side validation
    based on the data annotations in the ChangePasswordViewModel.
*@
@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
}
